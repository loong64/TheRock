From 29d551561607fffcdcf14723f101ef29c2288d3d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=E5=90=B4=E5=B0=8F=E7=99=BD?= <296015668@qq.com>
Date: Sun, 11 Jan 2026 13:22:52 +0000
Subject: [PATCH] Add loongarch64-linux support

---
 .../src/crypto/rand_extra/getrandom_fillin.h                   | 2 ++
 third_party/boringssl-with-bazel/src/include/openssl/target.h  | 3 +++
 2 files changed, 5 insertions(+)

diff --git a/third_party/boringssl-with-bazel/src/crypto/rand_extra/getrandom_fillin.h b/third_party/boringssl-with-bazel/src/crypto/rand_extra/getrandom_fillin.h
index adf8f7a..7824571 100644
--- a/third_party/boringssl-with-bazel/src/crypto/rand_extra/getrandom_fillin.h
+++ b/third_party/boringssl-with-bazel/src/crypto/rand_extra/getrandom_fillin.h
@@ -30,6 +30,8 @@
 #define EXPECTED_NR_getrandom 278
 #elif defined(OPENSSL_ARM)
 #define EXPECTED_NR_getrandom 384
+#elif defined(OPENSSL_LOONGARCH64)
+#define EXPECTED_NR_getrandom 278
 #elif defined(OPENSSL_RISCV64)
 #define EXPECTED_NR_getrandom 278
 #endif
diff --git a/third_party/boringssl-with-bazel/src/include/openssl/target.h b/third_party/boringssl-with-bazel/src/include/openssl/target.h
index e5fcd99..df67bfa 100644
--- a/third_party/boringssl-with-bazel/src/include/openssl/target.h
+++ b/third_party/boringssl-with-bazel/src/include/openssl/target.h
@@ -34,6 +34,9 @@
 #elif defined(__ARMEL__) || defined(_M_ARM)
 #define OPENSSL_32_BIT
 #define OPENSSL_ARM
+#elif defined(__loongarch64)
+#define OPENSSL_64_BIT
+#define OPENSSL_LOONGARCH64
 #elif defined(__MIPSEL__) && !defined(__LP64__)
 #define OPENSSL_32_BIT
 #define OPENSSL_MIPS
-- 
2.52.0

